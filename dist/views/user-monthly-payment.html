<user-tab user="user" active-tab="payments"></user-tab>

<h4>Monthly Payments for <select ng-model="selectedYear" 
    ng-options="year for year in years" ng-change="changeYear()"></select>
</h4>

<div >

    <div style="margin-bottom:10px">
        <button class="btn btn-primary" ng-click="save()" ng-show="hasAnyRoles(['admin','group_admin'])">Save</button>
        <button class="btn btn-default" ng-click="done()">Done</button>
    </div>

	<form role="form" name="addressForm">

        <div class="input-group" ng-repeat="month in months">            
            <span class="input-group-addon">
                <input type="checkbox" id="{{month.code}}" name="{{month.code}}"
                   ng-model="month.checked" ng-disabled="{{month.disabled}}">                
            </span>
            <div class="form-control">
                <label  for="{{month.code}}">{{month.name}}</label>
                <a ng-show="month.payment" href="" >

                    <span style="color:#555; margin-left:10px"><i>({{month.payment.referenceNumber}})</i></span>

                    <span style="color:#F73640" class="glyphicon glyphicon-remove pull-right" ng-show="hasAnyRoles(['admin'])" confirmed-click="remove(month.payment._id)" ng-confirm-click="Are you sure? This will remove this payment details."></span>

                    <span style="margin-right:10px" class="glyphicon glyphicon-info-sign pull-right" data-toggle="modal" data-target="#paymentInfoModal" ng-click="showPayment(month)"></span>
                </a>
            </div>
        </div>
    </form>
</div>

<div class="modal fade" id="paymentInfoModal" tabindex="-1" role="dialog" aria-labelledby="paymentInfoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>

        <h4 class="modal-title" id="paymentInfoModalLabel"><span class="glyphicon glyphicon-info-sign"></span> Payment Info</h4>
      </div>
      <div class="modal-body">

        <div class="form-group">
            <label>Resident</label>
            <div>{{user.full_name}}</div>
        </div>

        <div class="form-group">
            <label>Address</label>
            <div>{{address.number}}, {{address.street}}</div>
        </div>

        <div class="form-group">
            <label>Month</label>
            <div>{{currentPayment.name}}</div>
        </div>

        <div class="form-group">
            <label>Reference Number</label>
            <div>{{currentPayment.payment.referenceNumber}}</div>
        </div>

        <div class="form-group">
            <label>Created By</label>
            <div>{{currentPayment.payment.creator.full_name}}</div>
        </div>
        <div class="form-group">
            <label>Created On</label>
            <div>{{currentPayment.payment.created_date | date:'medium'}}</div>
        </div>
      </div>


      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>