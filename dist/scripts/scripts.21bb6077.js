"use strict";angular.module("segoraClientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/users",{templateUrl:"views/users.html",controller:"UsersListCtrl"}).when("/users/:userId",{templateUrl:"views/user-detail.html",controller:"UserDetailCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("segoraClientApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("segoraClientApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("segoraClientApp").controller("UsersListCtrl",["$scope","userService",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.list(function(b){a.users=b})}]),angular.module("segoraClientApp").factory("userService",["$resource",function(a){var b=42,c=a("http://segora-services.herokuapp.com/collections/user/:userId",{userId:"@id"},{save:{method:"POST",isArray:!0},update:{method:"PUT"}});return{someMethod:function(){return b},list:function(a){var b=c.query(function(){a(b)})},getById:function(a,b){c.get({userId:a},function(a){b(a)})},createNew:function(a){a(new c)},save:function(a,b){var d=new c;d.full_name=a.full_name,d.user_name=a.user_name,d.$save({},function(){console.log("OK"),b()})}}}]),angular.module("segoraClientApp").controller("UserDetailCtrl",["$scope","$route","$location","$http","userService",function(a,b,c,d,e){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f=b.current.params.userId;"new"==f?(a.editMode=!0,e.createNew(function(b){a.user=b})):(a.editMode=!1,e.getById(f,function(b){a.user=b})),a.edit=function(){a.editMode=!0},a.done=function(){a.editMode=!1},a.save=function(){if(console.log(a.user),a.user._id)a.user._id=void 0,a.user.$update({userId:f,test:!0},function(){c.path("/users")});else{console.log(a.user);var b=angular.copy(a.user),d=b.$save();console.log(d),d.then(function(){c.path("/users")}).catch(function(){console.log("error saving obj")}).finally(function(){console.log("always called")})}},a.remove=function(){console.log(a.user),a.user.$remove({userId:f},function(){c.path("/users")})}}]);