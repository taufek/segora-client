<h3>Payments Search</h3>

    <form role="form" name="searchForm" >
    
        <h4>Issued Date:</h4>
	    <div class="form-group">
	        <label for="from">From</label>
            <input class="datepicker form-control" name="from" ng-model="createdFrom" data-date-format="dd-mm-yyyy">
	    </div>

        <div class="form-group">
            <label for="to">To</label>
            <input class="datepicker form-control" name="to" ng-model="createdTo" data-date-format="dd-mm-yyyy">
        </div>

	    
    </form>

    <div style="margin-bottom:10px">
        <button class="btn btn-primary" ng-click="search()">Search</button>
       <!--  <button class="btn btn-default" ng-click="clear()">Clear</button> -->
    </div>

    <table class="table" ng-show="payments">
        <tr>
            <th>Ref</th>
            <th>Month</th>
            <th>Address</th>
            <th>Resident</th>
            <th>Details</th>
        </tr>
        <tbody>
            <tr ng-repeat="payment in payments">
            <td>
                {{payment.referenceNumber}}
            </td>
            <td>
                {{months[payment.month].name}}
            </td>
            <td>
                {{payment.user.address.fullAddress}}
            </td>   
            <td>
                {{payment.user.full_name}}
            </td>   
            <td>                 
                <a target="_none" href="{{getReceiptLink(payment._id)}}">
                    <span style="margin-right:10px" class="glyphicon glyphicon-print pull-right" ></span>
                </a>
                <a href="">               
                <span style="margin-right:10px" class="glyphicon glyphicon-info-sign" data-toggle="modal" data-target="#paymentInfoModal" ng-click="showPayment(payment)"></span>
                </a>
            </td>

            </tr>
        </tbody>
    </table>


        <div class="panel panel-default" ng-show="!payments.length > 0">
            <div class="panel-body">
                <i>No result</i>
            </div>
        </div>




<div class="modal fade" id="paymentInfoModal" tabindex="-1" role="dialog" aria-labelledby="paymentInfoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>

        <h4 class="modal-title" id="paymentInfoModalLabel"><span class="glyphicon glyphicon-info-sign"></span> Payment Info</h4>
      </div>
      <div class="modal-body">

        <div class="form-group">
            <label>Resident</label>
            <div>{{payment.user.full_name}}</div>
        </div>

        <div class="form-group">
            <label>Address</label>
            <div>{{payment.user.address.fullAddress}}</div>
        </div>

        <div class="form-group">
            <label>Month</label>
            <div>{{months[payment.month].name}}</div>
        </div>

        <div class="form-group">
            <label>Reference Number</label>
            <div>{{payment.referenceNumber}}</div>
        </div>

        <div class="form-group">
            <label>Bank Reference Number</label>
            <div ng-show="payment.bank_reference">{{payment.bank_reference}}</div>
            <div ng-hide="payment.bank_reference"><i>None</i></div>
        </div>

        <div class="form-group">
            <label>Issued By</label>
            <div>{{payment.audit.created_by_user.full_name}}</div>
        </div>
        <div class="form-group">
            <label>Issued On</label>
            <div>{{payment.audit.created_date | date:'medium'}}</div>
        </div>
      </div>


      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>